annotations:
  list:
    - builtIn: 1
      datasource:
        type: grafana
        uid: "-- Grafana --"
      enable: true
      hide: true
      iconColor: "rgba(0, 211, 255, 1)"
      name: Annotations & Alerts
      type: dashboard
editable: false
fiscalYearStartMonth: 0
graphTooltip: 0
links: []
panels:
  - collapsed: false
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 0
    panels: []
    title: Geography
    type: row
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          hideFrom:
            legend: false
            tooltip: false
            viz: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: green
              value: 0
      overrides: []
    gridPos:
      h: 8
      w: 12
      x: 0
      y: 1
    options:
      basemap:
        config:
          showLabels: false
          theme: auto
        name: Base Map
        noRepeat: true
        type: carto
      controls:
        mouseWheelZoom: true
        showAttribution: true
        showDebug: false
        showMeasure: false
        showScale: false
        showZoom: true
      layers:
        - config:
            blur: 15
            radius: 8
            weight:
              field: request_count
              fixed: 1
              max: 1
              min: 0
          filterData:
            id: byRefId
            options: geolocation
          location:
            latitude: latitude
            longitude: longitude
            mode: coords
          name: coordinates
          opacity: 0.8
          tooltip: true
          type: heatmap
      tooltip:
        mode: details
      view:
        allLayers: true
        id: coords
        lastOnly: false
        lat: 27
        layer: coordinates
        lon: 0
        noRepeat: true
        padding: 5
        shared: false
        zoom: 0
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select geoip_location_latitude as latitude, geoip_location_longitude as longitude, count(*) as request_count
          from traefik where geoip_location_latitude is not null and geoip_location_longitude is not null
          group by geoip_location_latitude, geoip_location_longitude
        refId: geolocation
        sqlMode: true
        stream: traefik
    title: Geographic Distribution
    type: geomap
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        fieldMinMax: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: green
              value: 0
      overrides: []
    gridPos:
      h: 8
      w: 12
      x: 12
      y: 1
    options:
      displayMode: basic
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 30
      minVizHeight: 30
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ""
        limit: 500
        values: true
      showUnfilled: false
      sizing: manual
      text:
        titleSize: 13
        valueSize: 13
      valueMode: text
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select coalesce(geoip_country_name, geoip_registered_country_name) as country_name, count(*) as request_count
          from traefik group by country_name having country_name is not null order by request_count desc
        refId: A
        sqlMode: true
        stream: traefik
    title: Top Countries
    type: bargauge
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        fieldMinMax: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: red
              value: 0
      overrides: []
    gridPos:
      h: 6
      w: 8
      x: 0
      y: 9
    options:
      displayMode: basic
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 30
      minVizHeight: 30
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ""
        limit: 500
        values: true
      showUnfilled: false
      sizing: manual
      text:
        titleSize: 13
        valueSize: 13
      valueMode: text
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select coalesce(geoip_country_name, geoip_registered_country_name) as country_name, count(*) as request_count
          from traefik where downstream_x_geoblock_remediation is not null group by country_name order by request_count desc
        refId: A
        sqlMode: true
        stream: traefik
    title: Top Geoblocked Countries
    type: bargauge
preload: false
schemaVersion: 42
tags: []
templating:
  list: []
timepicker: {}
timezone: browser
title: Traefik
uid:
  secret: traefik-dashboard-uid
