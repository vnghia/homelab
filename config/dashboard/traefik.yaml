annotations:
  list:
    - builtIn: 1
      datasource:
        type: grafana
        uid: "-- Grafana --"
      enable: true
      hide: true
      iconColor: "rgba(0, 211, 255, 1)"
      name: Annotations & Alerts
      type: dashboard
editable: false
fiscalYearStartMonth: 0
graphTooltip: 0
links: []
panels:
  - collapsed: true
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 15
    panels:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        fieldConfig:
          defaults:
            color:
              mode: thresholds
            custom:
              align: auto
              cellOptions:
                type: auto
              filterable: true
              footer:
                reducers: []
              inspect: false
            mappings: []
            thresholds:
              mode: percentage
              steps:
                - color: green
                  value: 0
          overrides: []
        gridPos:
          h: 20
          w: 24
          x: 0
          y: 16
        id: 1
        options:
          cellHeight: sm
          enablePagination: true
          showHeader: true
          sortBy:
            - desc: true
              displayName: Time
        targets:
          - datasource:
              type: openobserve
              uid:
                secret: openobserve-datasource-uid
            displayMode: logs
            organization: default
            query: select * from traefik
            refId: access-logs
            sqlMode: true
            stream: traefik
        title: Access Logs
        type: table
    title: Raw Data
    type: row
  - collapsed: false
    gridPos:
      h: 1
      w: 24
      x: 0
      y: 0
    panels: []
    title: Geography
    type: row
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: palette-classic
        custom:
          hideFrom:
            legend: false
            tooltip: false
            viz: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: green
              value: 0
      overrides: []
    gridPos:
      h: 8
      w: 12
      x: 0
      y: 1
    options:
      basemap:
        config:
          showLabels: false
          theme: auto
        name: Base Map
        noRepeat: true
        type: carto
      controls:
        mouseWheelZoom: true
        showAttribution: true
        showDebug: false
        showMeasure: false
        showScale: false
        showZoom: true
      layers:
        - config:
            blur: 15
            radius: 8
            weight:
              field: request_count
              fixed: 1
              max: 1
              min: 0
          filterData:
            id: byRefId
            options: geolocation
          location:
            latitude: latitude
            longitude: longitude
            mode: coords
          name: coordinates
          opacity: 0.8
          tooltip: true
          type: heatmap
      tooltip:
        mode: details
      view:
        allLayers: true
        id: coords
        lastOnly: false
        lat: 27
        layer: coordinates
        lon: 0
        noRepeat: true
        padding: 5
        shared: false
        zoom: 0
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select geoip_location_latitude as latitude, geoip_location_longitude as longitude, count(*) as request_count
          from traefik where geoip_location_latitude is not null and geoip_location_longitude is not null
          group by geoip_location_latitude, geoip_location_longitude
        refId: geolocation
        sqlMode: true
        stream: traefik
    title: Geographic Distribution
    type: geomap
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        fieldMinMax: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: green
              value: 0
      overrides: []
    gridPos:
      h: 8
      w: 12
      x: 12
      y: 1
    options:
      displayMode: basic
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 30
      minVizHeight: 30
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ""
        limit: 500
        values: true
      showUnfilled: false
      sizing: manual
      text:
        titleSize: 13
        valueSize: 13
      valueMode: text
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select coalesce(geoip_country_name, geoip_registered_country_name) as country_name, count(*) as request_count
          from traefik group by country_name having country_name is not null order by request_count desc
        refId: A
        sqlMode: true
        stream: traefik
    title: Top Countries
    type: bargauge
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        custom:
          align: auto
          cellOptions:
            type: auto
          filterable: true
          footer:
            reducers: []
          inspect: false
          wrapText: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: green
              value: 0
      overrides:
        - matcher:
            id: byName
            options: geoip_autonomous_system_organization
          properties:
            - id: displayName
              value: ASN
        - matcher:
            id: byName
            options: geoip_city_name
          properties:
            - id: displayName
              value: City
        - matcher:
            id: byName
            options: geoip_country_name
          properties:
            - id: displayName
              value: Country
        - matcher:
            id: byName
            options: geoip_registered_country_name
          properties:
            - id: displayName
              value: Registered Country
        - matcher:
            id: byName
            options: request_count
          properties:
            - id: displayName
              value: Request Count
    gridPos:
      h: 6
      w: 16
      x: 0
      y: 9
    options:
      cellHeight: sm
      showHeader: true
      sortBy:
        - desc: true
          displayName: Request Count
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select geoip_autonomous_system_organization, geoip_city_name, geoip_country_name, geoip_registered_country_name, count(*) as request_count
          from traefik where downstream_x_geoblock_remediation is not null or downstream_x_crowdsec_remediation = 'ban'
          group by geoip_autonomous_system_organization, geoip_city_name, geoip_country_name, geoip_registered_country_name
        refId: A
        sqlMode: true
        stream: traefik
    title: Top Blocked ASNs
    type: table
  - datasource:
      type: openobserve
      uid:
        secret: openobserve-datasource-uid
    fieldConfig:
      defaults:
        color:
          mode: thresholds
        fieldMinMax: false
        mappings: []
        thresholds:
          mode: percentage
          steps:
            - color: red
              value: 0
      overrides: []
    gridPos:
      h: 6
      w: 8
      x: 16
      y: 9
    options:
      displayMode: basic
      legend:
        calcs: []
        displayMode: list
        placement: bottom
        showLegend: false
      maxVizHeight: 30
      minVizHeight: 30
      minVizWidth: 8
      namePlacement: top
      orientation: horizontal
      reduceOptions:
        calcs:
          - lastNotNull
        fields: ""
        limit: 500
        values: true
      showUnfilled: false
      sizing: manual
      text:
        titleSize: 13
        valueSize: 13
      valueMode: text
    targets:
      - datasource:
          type: openobserve
          uid:
            secret: openobserve-datasource-uid
        displayMode: auto
        organization: default
        query: >-
          select coalesce(geoip_country_name, geoip_registered_country_name) as country_name, count(*) as request_count
          from traefik where downstream_x_geoblock_remediation is not null or downstream_x_crowdsec_remediation = 'ban'
          group by country_name order by request_count desc
        refId: A
        sqlMode: true
        stream: traefik
    title: Top Blocked Countries
    type: bargauge
preload: false
schemaVersion: 42
tags: []
templating:
  list: []
timepicker: {}
timezone: browser
title: Traefik
uid:
  secret: traefik-dashboard-uid
